
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>UK Student Cost of Living Tracker</title>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.gstatic.comgoogleapis.com/css2?family=Inter:wght@400;500;600&display= Absolute CSS URL (ensures correct path) -->
  <link rel="stylesheet" href="https://shounak31-design.github.io.css

  <!-- Minimal inline fallback to prove styling applies even if external CSS fails -->
  <style>
    html,body{height:100%;margin:0}
    body{
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      background:
        linear-gradient(180deg, rgba(8,17,28,0.80), rgba(8,17,28,0.85)),
        url('https://images.unsplash.com/photo-1543512218-d4d483b70f37?auto=format&fit=crop&w=1800&q=80')
        center/cover no-repeat fixed;
      display:grid; grid-template-rows:1fr auto;
    }
    .center{display:flex;align-items:center;justify-content:center;padding:48px 16px}
    .wrap{width:100%;max-width:900px}
    .card{background:rgba(255,255,255,0.08);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-radius:20px;padding:24px;border:1px solid rgba(255,255,255,0.18)}
    .title{margin:0 0 8px 0;font-weight:600;text-align:center}
    .subtitle{text-align:center;color:#cbd5e1;font-size:14px;margin:0 0 18px 0}
    label{display:block;color:#fff}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .btn{padding:10px 12px;border-radius:12px;border:none;background:#0ea5e9;color:#082032;font-weight:600;cursor:pointer}
    .btn.secondary{background:rgba(255,255,255,0.16);color:#fff;border:1px solid rgba(255,255,255,0.22)}
    footer{text-align:center;padding:14px;color:#cbd5e1;font-size:13px}
    footer a{color:#93c5fd;text-decoration:none}
  </style>
</head>
<body>
  <div class="center">
    <div class="wrap">
      <h1 class="title">UK Student Cost of Living</h1>
      <p class="subtitle">A minimal, experimentative budgeting tool for living in London.</p>

      <div class="card">
        <!-- Top bar -->
        <div class="actions" style="justify-content:space-between">
          <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
            <label style="display:flex;gap:10px;align-items:center">
              <span style="color:#cbd5e1;font-size:12px">Month</span>
              <input id="monthInput" type="month" />
            </label>
            <span style="color:#cbd5e1;font-size:12px">Pick the month you're budgeting for</span>
          </div>
          <div class="actions">
            <button class="btn secondary" id="resetBtn">Reset</button>
            <button class="btn" id="exportBtn">Export CSV</button>
          </div>
        </div>

        <!-- Two-column grid -->
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:18px;margin-top:14px">
          <!-- Base expenses -->
          <div>
            <label>Rent</label><input id="rent" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
            <label>Council Tax</label><input id="council" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
            <label>Wi‑Fi / Broadband</label><input id="wifi" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
            <label>Phone Bill</label><input id="phone" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
            <label>Credit Card Repayments</label><input id="credit" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
            <label>Groceries</label><input id="groceries" class="input" type="number" placeholder="0.00" min="0" step="0.01" />
          </div>

          <!-- Partner & extras -->
          <div>
            <label>Partner Split</label>
            <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
              <label><input id="partnerToggle" type="checkbox"> Add partner split</label>
              <label><input type="radio" name="splitType" id="splitEqual" value="equal" checked> Equal</label>
              <label><input type="radio" name="splitType" id="splitPercent" value="percent"> Percentage</label>
            </div>
            <div id="percentRow" style="display:none;margin-top:8px;color:#cbd5e1;font-size:12px">
              <div style="display:flex;gap:10px;align-items:center">
                <span>Your share %</span>
                <input id="youPct" type="number" min="0" max="100" step="1" value="50" style="width:80px;padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,0.22);background:rgba(255,255,255,0.10);color:#fff;">
                <span>Partner % = <span id="partnerPctText">50</span></span>
              </div>
            </div>

            <label style="margin-top:12px">Extra Expenses</label>
            <div id="extras"></div>
            <div class="actions"><button class="btn" id="addExtraBtn">+ Add extra</button></div>
            <div style="color:#cbd5e1;font-size:12px">Add custom lines (e.g., travel, books, societies, gym).</div>
          </div>
        </div>

        <!-- Bottom actions -->
        <div class="actions" style="justify-content:center;margin-top:16px">
          <button class="btn" id="calcBtn">Calculate</button>
          <button class="btn secondary" id="togglePanelBtn">View Results</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Results -->
  <button class="btn" id="fabBtn" style="position:fixed;bottom:22px;right:22px;border-radius:999px">Results</button>
  <div id="panel" style="position:fixed;bottom:90px;right:22px;max-width:360px;background:rgba(255,255,255,0.10);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,0.20);border-radius:16px;padding:16px;display:none">
    <div style="font-weight:600;margin-bottom:8px">Results <span id="monthLabel" style="color:#cbd5e1;font-size:12px"></span></div>
    <div style="display:flex;justify-content:space-between;margin:6px 0"><span>Monthly total</span><strong id="monthlyTotal">£0.00</strong></div>
    <div style="display:flex;justify-content:space-between;margin:6px 0"><span>Yearly total</span><strong id="yearlyTotal">£0.00</strong></div>
    <div id="partnerBreak" style="display:none;margin-top:8px">
      <div style="display:flex;justify-content:space-between;margin:6px 0"><span>Your share</span><strong id="yourShare">£0.00</strong></div>
      <div style="display:flex;justify-content:space-between;margin:6px 0"><span>Partner share</span><strong id="partnerShare">£0.00</strong></div>
      <div style="color:#cbd5e1;font-size:12px">Split: <span id="splitDesc">Equal</span></div>
    </div>
  </div>

  <!-- Footer credit -->
  <footer>
    Created by <strong>Shounak Bhattacharjee</strong> •
    <a href="https://uk.linkedin.com/in/shounakbhattacharjee31" target="_blank" rel="noopener // Utilities
    const gbp = n => "£" + (Number(n||0)).toFixed(2);
    const val = id => parseFloat(document.getElementById(id).value) || 0;

    // Extras
    const extrasEl = document.getElementById('extras');
    function addExtraRow(label='', amount=''){
      const row = document.createElement('div');
      row.style.display = 'grid';
      row.style.gridTemplateColumns = '1.2fr 0.8fr';
      row.style.gap = '12px';
      row.style.marginBottom = '8px';
      row.innerHTML = `
        <input type="text" placeholder="Label (e.g., Travel)" value="${label}" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.22);background:rgba(255,255,255,0.10);color:#fff;">
        <input type="number" placeholder="0.00" min="0" step="0.01" value="${amount}" style="width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.22);background:rgba(255,255,255,0.10);color:#fff;">`;
      extrasEl.appendChild(row);
      attachLiveUpdate();
    }
    addExtraRow(); addExtraRow(); addExtraRow();
    document.getElementById('addExtraBtn').addEventListener('click', e => { e.preventDefault(); addExtraRow(); });

    // Partner split
    const partnerToggle = document.getElementById('partnerToggle');
    const splitEqual = document.getElementById('splitEqual');
    const splitPercent = document.getElementById('splitPercent');
    const percentRow = document.getElementById('percentRow');
    const youPctInput = document.getElementById('youPct');
    const partnerPctText = document.getElementById('partnerPctText');
    function updatePercent(){
      let youPct = parseFloat(youPctInput.value || 0);
      youPct = Math.max(0, Math.min(100, youPct));
      youPctInput.value = youPct;
      partnerPctText.textContent = (100 - youPct).toFixed(0);
    }
    youPctInput.addEventListener('input', updatePercent);
    splitPercent.addEventListener('change', () => percentRow.style.display = 'block');
    splitEqual.addEventListener('change', () => percentRow.style.display = 'none');
    updatePercent();

    // Floating panel
    const panel = document.getElementById('panel');
    document.getElementById('fabBtn').addEventListener('click', () => panel.style.display = (panel.style.display==='none'||panel.style.display==='') ? 'block' : 'none');
    document.getElementById('togglePanelBtn').addEventListener('click', () => panel.style.display = (panel.style.display==='none'||panel.style.display==='') ? 'block' : 'none');

    // Reset
    document.getElementById('resetBtn').addEventListener('click', () => {
      ['rent','council','wifi','phone','credit','groceries'].forEach(id => document.getElementById(id).value = '');
      document.getElementById('monthInput').value = '';
      partnerToggle.checked = false; splitEqual.checked = true; splitPercent.checked = false; percentRow.style.display = 'none';
      youPctInput.value = 50; updatePercent();
      extrasEl.innerHTML = ''; addExtraRow(); addExtraRow(); addExtraRow();
      calculate();
    });

    // Export CSV
    document.getElementById('exportBtn').addEventListener('click', () => {
      const month = document.getElementById('monthInput').value || 'Unspecified';
      const base = [
        ['Rent', val('rent')], ['Council Tax', val('council')], ['Wi‑Fi', val('wifi')],
        ['Phone Bill', val('phone')], ['Credit Card', val('credit')], ['Groceries', val('groceries')],
      ];
      const extras = Array.from(extrasEl.children).map(row=>{
        const inputs = row.querySelectorAll('input');
        const label = inputs[0].value || 'Extra';
        const amount = parseFloat(inputs[1].value||0);
        return [label, amount];
      });
      const monthlyTotal = [...base, ...extras].reduce((s, [,n]) => s + Number(n||0), 0);
      const yearlyTotal = monthlyTotal * 12;

      let youShare='', partnerShare='', splitMeta='';
      if (partnerToggle.checked){
        if (splitPercent.checked){
          const youPct = parseFloat(youPctInput.value||0);
          youShare = monthlyTotal * (youPct/100);
          partnerShare = monthlyTotal - youShare;
          splitMeta = `Percentage (${youPct}% / ${(100-youPct).toFixed(0)}%)`;
        } else {
          youShare = partnerShare = monthlyTotal/2;
          splitMeta = 'Equal (50% / 50%)';
        }
      }

      let rows = [['Month', month], ...base, ...extras,
                  ['Monthly Total', monthlyTotal.toFixed(2)], ['Yearly Total', yearlyTotal.toFixed(2)]];
      if (partnerToggle.checked){
        rows.push(['Split Type', splitMeta]);
        rows.push(['Your Share (Monthly)', (youShare||0).toFixed(2)]);
        rows.push(['Partner Share (Monthly)', (partnerShare||0).toFixed(2)]);
      }
      const csv = 'data:text/csv;charset=utf-8,' + 'Category,Amount (£)\n' + rows.map(r=>r.join(',')).join('\n');
      const a = document.createElement('a'); a.href = encodeURI(csv);
      a.download = `cost_of_living_${month.replace(/-/g,'_')||'unspecified'}.csv`; document.body.appendChild(a); a.click(); a.remove();
    });

    // Calculate
    const monthlyTotalEl = document.getElementById('monthlyTotal');
    const yearlyTotalEl  = document.getElementById('yearlyTotal');
    const monthLabelEl   = document.getElementById('monthLabel');
    const yourShareEl    = document.getElementById('yourShare');
    const partnerShareEl = document.getElementById('partnerShare');
    const partnerBreakEl = document.getElementById('partnerBreak');
    const splitDescEl    = document.getElementById('splitDesc');

    function calculate(){
      const base = [
        ['Rent', val('rent')], ['Council Tax', val('council')], ['Wi‑Fi', val('wifi')],
        ['Phone Bill', val('phone')], ['Credit Card', val('credit')], ['Groceries', val('groceries')],
      ];
      const extras = Array.from(extrasEl.children).map(row=>{
        const inputs = row.querySelectorAll('input');
        return [inputs[0].value || 'Extra', parseFloat(inputs[1].value||0)];
      });
      const month = document.getElementById('monthInput').value || '';
      monthLabelEl.textContent = month ? `• ${month}` : '';
      const monthlyTotal = [...base, ...extras].reduce((s, [,n]) => s + Number(n||0), 0);
      const yearlyTotal = monthlyTotal * 12;
      monthlyTotalEl.textContent = "£" + monthlyTotal.toFixed(2);
      yearlyTotalEl.textContent  = "£" + yearlyTotal.toFixed(2);

      if (partnerToggle.checked){
        partnerBreakEl.style.display = 'block';
        if (splitPercent.checked){
          const youPct = parseFloat(youPctInput.value||0);
          const yourShare = monthlyTotal * (youPct/100);
          const partnerShare = monthlyTotal - yourShare;
          yourShareEl.textContent = "£" + yourShare.toFixed(2);
          partnerShareEl.textContent = "£" + partnerShare.toFixed(2);
          splitDescEl.textContent = `Percentage (${youPct}% / ${(100-youPct).toFixed(0)}%)`;
        } else {
          const share = monthlyTotal / 2;
          yourShareEl.textContent = "£" + share.toFixed(2);
          partnerShareEl.textContent = "£" + share.toFixed(2);
          splitDescEl.textContent = 'Equal (50% / 50%)';
        }
      } else {
        partnerBreakEl.style.display = 'none';
      }
    }

    document.getElementById('calcBtn').addEventListener('click', calculate);

    function attachLiveUpdate(){
      const inputs = document.querySelectorAll('#monthInput, #youPct, #partnerToggle, #splitEqual, #splitPercent, input[type=number], input[type=text]');
      inputs.forEach(el => el.addEventListener('input', calculate));
      partnerToggle.addEventListener('change', calculate);
      splitEqual.addEventListener('change', calculate);
      splitPercent.addEventListener('change', calculate);
    }
    attachLiveUpdate(); calculate();
  </script>
</body>
</html>
